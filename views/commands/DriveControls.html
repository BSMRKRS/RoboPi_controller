<h1 class="label">You made it!</h1>
<h1 id="clickable-title" onclick="swap_title();">!!!Click Here To Begin!!!</h1>
<p>You can use the qwe,asd,zc keys to drive.</p>
<table>
  <tr>
    <td style="border:2px solid black;">q</td>
    <td style="border:2px solid black;">w</td>
    <td style="border:2px solid black;">e</td>
  </tr>
  <tr>
    <td style="border:2px solid black;">a</td>
    <td style="border:2px solid black;">s</td>
    <td style="border:2px solid black;">d</td>
  </tr>
  <tr>
    <td style="border:2px solid black;">z</td>
    <td style="border:2px solid black;"></td>
    <td style="border:2px solid black;">c</td>
  </tr>
</table>
<p>Add more behavior in controllers/commands!</p>
<form action={{=update_parameters}}>
  <p>L Motor Forward Setting</p>
  <input name="motorL_forward" value={{=motorL_forward}} />
  <p>L Motor Backward Setting</p>
  <input name="motorL_backward" value={{=motorL_backward}} />
  <p>R Motor Forward Setting</p>
  <input name="motorR_forward" value={{=motorR_forward}} />
  <p>R Motor Backward Setting</p>
  <input name="motorR_backward" value={{=motorR_backward}} />
  <br/>
  <input type="submit" />
</form>

{{
response.files.insert(0,URL('static','js/jquery.js'))
response.include_meta()
response.include_files()
}}



<script type="text/javascript"><!--
    // These variables are used by the web2py_ajax_init
        // function in web2py.js (which is loaded below).
    var w2p_ajax_confirm_message =
        "{{=T('Are you sure you want to delete this object?')}}";
    var w2p_ajax_date_format = "{{=T('%Y-%m-%d')}}";
    var w2p_ajax_datetime_format = "{{=T('%Y-%m-%d %H:%M:%S')}}";
//--></script>
<script src="{{=URL('static','js/web2py.js')}}"
        type="text/javascript"></script>
<script type="text/javascript">
  swap_title = function(){$('#clickable-title').text('Ready!');}
  establish_control_keys = function(){
    console.log("loaded establish_control_keys");
    $(document).one('keydown',function(e) {
      console.log(e.which,"go");
      ajax_direction("go",e.which);
    });
    $(document).one('keyup',function(e) {
      console.log(e.which,"stop");
      ajax_direction("stop",e.which);
      establish_control_keys();
    });
  }

  ajax_direction = function(command, key){
    jQuery.ajax({
      url: '{{=forward}}',
      data: {key: key, command: command},
      method: 'get'
    });
  }

  $(document).ready(establish_control_keys());
</script>
